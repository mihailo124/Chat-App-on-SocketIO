{"ast":null,"code":"import _slicedToArray from \"/Users/Mihail/Documents/VS/projects/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Mihail/Documents/VS/projects/chat-app/client/src/containers/Join/Join.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport classes from \"./Join.module.css\";\nimport RecentRooms from \"../../components/RecentRooms/RecentRooms\";\nimport io from \"socket.io-client\";\nlet socket;\n\nconst Join = () => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        name = _useState2[0],\n        setName = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        room = _useState4[0],\n        setRoom = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        roomsData = _useState6[0],\n        setRoomsData = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        redirect = _useState8[0],\n        setRedirect = _useState8[1];\n\n  let roomNumber = null; // roomNumber used to hide room input in case query params were passed\n\n  if (window.location.search) {\n    roomNumber = queryString.parse(window.location.search).room;\n  }\n\n  useEffect(() => {\n    const ENDPOINT = \"https://socketsio-chat.herokuapp.com/\";\n    socket = io(ENDPOINT);\n    socket.emit(\"recentRooms\", data => {\n      setRoomsData(data);\n    });\n    setRoom(roomNumber);\n    if (roomNumber) setRoom(roomNumber);\n  }, []);\n\n  const keyPressSubmutHandler = event => {\n    if (event.key === \"Enter\") {\n      console.log(event.key);\n\n      if (name && room) {\n        setRedirect(true); //sets redirect state and applies <Redirect /> compponent\n      }\n    }\n  };\n\n  const setRoomHandler = room => setRoom(room);\n\n  return React.createElement(\"div\", {\n    className: classes.OuterWrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, window.location.search && React.createElement(\"div\", {\n    className: classes.stepBackButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \" \", React.createElement(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Step back\")), React.createElement(\"div\", {\n    className: classes.InnerWrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: classes.Header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Join Chat \", roomNumber), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onKeyPress: event => keyPressSubmutHandler(event),\n    placeholder: \"Name\",\n    className: classes.JoinInput,\n    type: \"text\",\n    onChange: event => setName(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onKeyPress: event => keyPressSubmutHandler(event),\n    placeholder: \"Room name\",\n    className: roomNumber ? classes.None : [classes.JoinInput, classes.mt20].join(\" \"),\n    type: \"text\",\n    onChange: event => setRoom(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(Link, {\n    onClick: event => !name || !(room || roomNumber) ? event.preventDefault() : null,\n    to: `/chat?name=${name}&room=${room}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: [classes.Button, classes.mt20].join(\" \"),\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Sign In\"))), roomsData ? React.createElement(RecentRooms, {\n    setRoomHandler: setRoomHandler,\n    roomsData: roomsData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }) : null, redirect && React.createElement(Redirect, {\n    push: true,\n    to: `/chat?name=${name}&room=${room}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }));\n};\n\nexport default Join;","map":{"version":3,"sources":["/Users/Mihail/Documents/VS/projects/chat-app/client/src/containers/Join/Join.js"],"names":["React","useState","useEffect","Link","Redirect","queryString","classes","RecentRooms","io","socket","Join","name","setName","room","setRoom","roomsData","setRoomsData","redirect","setRedirect","roomNumber","window","location","search","parse","ENDPOINT","emit","data","keyPressSubmutHandler","event","key","console","log","setRoomHandler","OuterWrapper","stepBackButton","InnerWrapper","Header","JoinInput","target","value","None","mt20","join","preventDefault","Button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport classes from \"./Join.module.css\";\nimport RecentRooms from \"../../components/RecentRooms/RecentRooms\";\n\nimport io from \"socket.io-client\";\n\nlet socket;\n\nconst Join = () => {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [roomsData, setRoomsData] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n\n  let roomNumber = null; // roomNumber used to hide room input in case query params were passed\n\n  if (window.location.search) {\n    roomNumber = queryString.parse(window.location.search).room;\n  }\n\n  useEffect(() => {\n    const ENDPOINT = \"https://socketsio-chat.herokuapp.com/\";\n    socket = io(ENDPOINT);\n    socket.emit(\"recentRooms\", data => {\n      setRoomsData(data);\n    });\n    setRoom(roomNumber);\n\n    if (roomNumber) setRoom(roomNumber);\n  }, []);\n\n  const keyPressSubmutHandler = event => {\n    if (event.key === \"Enter\") {\n      console.log(event.key);\n      if (name && room) {\n        setRedirect(true); //sets redirect state and applies <Redirect /> compponent\n      }\n    }\n  };\n\n  const setRoomHandler = room => setRoom(room);\n\n  return (\n    <div className={classes.OuterWrapper}>\n      {window.location.search && <div className={classes.stepBackButton}> <a >Step back</a></div>}\n      <div className={classes.InnerWrapper}>\n        <h1 className={classes.Header}>Join Chat {roomNumber}</h1>\n        <div>\n          <input\n            onKeyPress={event => keyPressSubmutHandler(event)}\n            placeholder=\"Name\"\n            className={classes.JoinInput}\n            type=\"text\"\n            onChange={event => setName(event.target.value)}\n          />\n        </div>\n        <div>\n          <input\n            onKeyPress={event => keyPressSubmutHandler(event)}\n            placeholder=\"Room name\"\n            className={\n              roomNumber\n                ? classes.None\n                : [classes.JoinInput, classes.mt20].join(\" \")\n            }\n            type=\"text\"\n            onChange={event => setRoom(event.target.value)}\n          />\n        </div>\n        <Link\n          onClick={event =>\n            !name || !(room || roomNumber) ? event.preventDefault() : null\n          }\n          to={`/chat?name=${name}&room=${room}`}\n        >\n          <button\n            className={[classes.Button, classes.mt20].join(\" \")}\n            type=\"submit\"\n          >\n            Sign In\n          </button>\n        </Link>\n      </div>\n      {roomsData ? (\n        <RecentRooms setRoomHandler={setRoomHandler} roomsData={roomsData} />\n      ) : null}\n      {redirect && <Redirect push to={`/chat?name=${name}&room=${room}`} />}\n    </div>\n  );\n};\n\nexport default Join;\n"]},"metadata":{},"sourceType":"module"}